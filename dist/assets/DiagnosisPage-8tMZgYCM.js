import{f as P,r,d as J,q as a,s,x as u,t as g,F as h,E as k,e as I,v as M,I as O,D as c,J as U,H as b,n as V,y as G,z as t}from"./vue-vendor-DjNuForC.js";import{_ as L}from"./index-B5beYMX8.js";import"./vant-vendor-D-yQvc_G.js";const T={class:"diagnosis-page"},q={class:"diagnosis-steps"},H={class:"step-indicator"},$={class:"step-content"},j={key:0,class:"step-panel"},K={class:"animal-categories"},Q=["onClick"],W={class:"category-icon"},X=["disabled"],Y={key:1,class:"step-panel"},Z={key:0,class:"upload-placeholder"},ss={key:1,class:"uploaded-image"},es=["src"],ls={class:"step-actions"},ts=["disabled"],ns={key:2,class:"step-panel"},as={class:"analysis-container"},is={class:"progress-bar"},os={key:3,class:"step-panel"},ds={class:"result-container"},us={class:"result-header"},cs={class:"confidence-score"},rs={class:"result-content"},vs={class:"status-icon"},ps={class:"status-text"},ms={class:"diagnosis-details"},gs={class:"recommendations"},_s={class:"expert-advice"},ys=P({__name:"DiagnosisPage",setup(fs){const x=G(),l=r(1),p=r(""),v=r(""),m=r(),_=r(0),y=r("正在上传图片..."),S=r([{id:"dog",name:"犬类",icon:"dog",description:"包括各种犬种"},{id:"cat",name:"猫类",icon:"cat",description:"包括各种猫种"},{id:"bird",name:"鸟类",icon:"bird",description:"包括各种鸟类"},{id:"fish",name:"鱼类",icon:"fish",description:"包括各种鱼类"},{id:"reptile",name:"爬行动物",icon:"reptile",description:"包括蜥蜴、蛇类等"},{id:"other",name:"其他",icon:"paw",description:"其他动物类型"}]),o=r({confidence:85,status:"healthy",title:"健康状况良好",description:"您的宠物整体健康状况良好，未发现明显异常。",details:["毛发状态正常，无脱落异常","眼睛清澈明亮，无分泌物","精神状态良好，活动正常","食欲正常，消化系统健康"],recommendations:["继续保持良好的饮食习惯","定期进行体检和疫苗接种","保持适当的运动量","注意观察日常行为变化"],expertAdvice:"建议每半年进行一次全面体检，如有任何异常症状请及时咨询兽医。"}),A=i=>{p.value=i},f=()=>{l.value<4&&(l.value++,l.value===3&&R())},w=()=>{l.value>1&&l.value--},F=()=>{m.value&&m.value.click()},z=i=>{const d=i.target.files?.[0];if(d){const n=new FileReader;n.onload=C=>{v.value=C.target?.result},n.readAsDataURL(d)}},D=()=>{v.value="",m.value&&(m.value.value="")},R=()=>{const i=["正在上传图片...","AI 正在识别动物特征...","分析健康状况...","生成诊断报告...","分析完成！"];let e=0;const d=setInterval(()=>{e<i.length&&(y.value=i[e]||"",_.value=(e+1)/i.length*100,e++,e>=i.length&&(clearInterval(d),V(()=>{setTimeout(()=>{f()},1e3)})))},1500)},B=()=>{l.value=1,p.value="",v.value="",_.value=0,y.value="正在上传图片..."},E=()=>{const i=JSON.parse(localStorage.getItem("diagnosisResults")||"[]");i.push({id:Date.now(),category:p.value,image:v.value,result:o.value,date:new Date().toISOString()}),localStorage.setItem("diagnosisResults",JSON.stringify(i)),alert("诊断结果已保存！")},N=()=>{x.push("/expert")};return J(()=>{}),(i,e)=>{const d=M("van-icon");return t(),a("div",T,[e[15]||(e[15]=s("div",{class:"page-header"},[s("h1",null,"动物健康诊断"),s("p",null,"AI 智能分析动物健康状况")],-1)),s("div",q,[s("div",H,[s("div",{class:u(["step",{active:l.value>=1,completed:l.value>1}])},[...e[0]||(e[0]=[s("div",{class:"step-number"},"1",-1),s("span",null,"选择动物",-1)])],2),s("div",{class:u(["step-line",{active:l.value>1}])},null,2),s("div",{class:u(["step",{active:l.value>=2,completed:l.value>2}])},[...e[1]||(e[1]=[s("div",{class:"step-number"},"2",-1),s("span",null,"上传照片",-1)])],2),s("div",{class:u(["step-line",{active:l.value>2}])},null,2),s("div",{class:u(["step",{active:l.value>=3,completed:l.value>3}])},[...e[2]||(e[2]=[s("div",{class:"step-number"},"3",-1),s("span",null,"AI 分析",-1)])],2),s("div",{class:u(["step-line",{active:l.value>3}])},null,2),s("div",{class:u(["step",{active:l.value>=4}])},[...e[3]||(e[3]=[s("div",{class:"step-number"},"4",-1),s("span",null,"诊断结果",-1)])],2)])]),s("div",$,[l.value===1?(t(),a("div",j,[e[4]||(e[4]=s("h3",null,"选择要诊断的动物类型",-1)),s("div",K,[(t(!0),a(h,null,k(S.value,n=>(t(),a("div",{key:n.id,class:u(["category-card",{selected:p.value===n.id}]),onClick:C=>A(n.id)},[s("div",W,[I(d,{name:n.icon,size:"32",color:"#4F46E5"},null,8,["name"])]),s("h4",null,c(n.name),1),s("p",null,c(n.description),1)],10,Q))),128))]),s("button",{class:"btn-primary",disabled:!p.value,onClick:f}," 下一步 ",8,X)])):g("",!0),l.value===2?(t(),a("div",Y,[e[7]||(e[7]=s("h3",null,"上传动物照片",-1)),s("div",{class:"upload-area",onClick:F},[v.value?(t(),a("div",ss,[s("img",{src:v.value,alt:"上传的图片"},null,8,es),s("button",{class:"remove-image",onClick:O(D,["stop"])},"×")])):(t(),a("div",Z,[I(d,{name:"photograph",size:"48",color:"#9CA3AF"}),e[5]||(e[5]=s("p",null,"点击上传照片",-1)),e[6]||(e[6]=s("span",null,"支持 JPG、PNG 格式",-1))]))]),s("input",{ref_key:"fileInput",ref:m,type:"file",accept:"image/*",onChange:z,style:{display:"none"}},null,544),e[8]||(e[8]=s("div",{class:"upload-tips"},[s("h4",null,"拍照建议："),s("ul",null,[s("li",null,"确保动物在照片中清晰可见"),s("li",null,"光线充足，避免阴影"),s("li",null,"多角度拍摄效果更佳"),s("li",null,"避免模糊或过暗的照片")])],-1)),s("div",ls,[s("button",{class:"btn-secondary",onClick:w},"上一步"),s("button",{class:"btn-primary",disabled:!v.value,onClick:f}," 开始分析 ",8,ts)])])):g("",!0),l.value===3?(t(),a("div",ns,[s("div",as,[e[9]||(e[9]=s("div",{class:"analysis-animation"},[s("div",{class:"pulse-circle"}),s("div",{class:"pulse-circle delay-1"}),s("div",{class:"pulse-circle delay-2"})],-1)),e[10]||(e[10]=s("h3",null,"AI 正在分析中...",-1)),s("p",null,c(y.value),1),s("div",is,[s("div",{class:"progress-fill",style:U({width:_.value+"%"})},null,4)])])])):g("",!0),l.value===4?(t(),a("div",os,[s("div",ds,[s("div",us,[e[11]||(e[11]=s("h3",null,"诊断结果",-1)),s("div",cs,[s("span",null,"置信度: "+c(Math.round(o.value.confidence))+"%",1)])]),s("div",rs,[s("div",{class:u(["health-status",o.value.status])},[s("div",vs,[o.value.status==="healthy"?(t(),b(d,{key:0,name:"success",size:"32",color:"#10B981"})):o.value.status==="warning"?(t(),b(d,{key:1,name:"warning",size:"32",color:"#F59E0B"})):(t(),b(d,{key:2,name:"warning-o",size:"32",color:"#EF4444"}))]),s("div",ps,[s("h4",null,c(o.value.title),1),s("p",null,c(o.value.description),1)])],2),s("div",ms,[e[12]||(e[12]=s("h4",null,"详细分析",-1)),s("ul",null,[(t(!0),a(h,null,k(o.value.details,n=>(t(),a("li",{key:n},c(n),1))),128))])]),s("div",gs,[e[13]||(e[13]=s("h4",null,"建议措施",-1)),s("ul",null,[(t(!0),a(h,null,k(o.value.recommendations,n=>(t(),a("li",{key:n},c(n),1))),128))])]),s("div",_s,[e[14]||(e[14]=s("h4",null,"专家建议",-1)),s("p",null,c(o.value.expertAdvice),1),s("button",{class:"btn-outline",onClick:N}," 咨询专家 ")])])]),s("div",{class:"step-actions"},[s("button",{class:"btn-secondary",onClick:B},"重新诊断"),s("button",{class:"btn-primary",onClick:E},"保存结果")])])):g("",!0)])])}}}),Cs=L(ys,[["__scopeId","data-v-17cc05fe"]]);export{Cs as default};
