import{f as I,r as l,d as T,n as B,q as a,s as e,t as k,F as m,E as g,C as q,K as z,L as H,M as D,I as P,x as S,D as _,z as n}from"./vue-vendor-DjNuForC.js";import{d as A,p as w}from"./performance-DTgyZ5pq.js";import{_ as E}from"./index-B5beYMX8.js";import"./vant-vendor-D-yQvc_G.js";const K={class:"expert-page"},N={class:"chat-messages"},V={class:"message-avatar"},Q={key:0,class:"ai-avatar"},F={key:1,class:"user-avatar"},R={class:"message-content"},U=["innerHTML"],$={class:"message-time"},G={key:0,class:"message ai"},J={class:"input-container"},O={class:"input-wrapper"},W=["onKeydown","disabled"],X=["disabled"],Y={key:0,class:"quick-questions"},Z={class:"question-chips"},ee=["onClick"],te=I({__name:"ExpertPage",setup(se){const v=l([]),r=l(""),i=l(!1),u=l(null),d=l(null),f=l(["如何识别狗的品种？","猫咪的常见疾病有哪些？","鸟类如何区分雌雄？","爬行动物的饲养要点","鱼类的水质要求","如何训练宠物？"]);T(()=>{c("ai","你好！我是AI动物专家助手，可以回答你关于动物的任何问题。有什么可以帮助你的吗？")});const c=(s,t)=>{const o={id:Date.now()+Math.random(),type:s,content:t,timestamp:new Date};v.value.push(o),j()},M=A(async s=>{if(!(!s.trim()||i.value)){c("user",s),i.value=!0,w.mark("llm-request-start");try{const t=await C(s);c("ai",t),w.measure("llm-request-duration","llm-request-start")}catch(t){console.error("LLM API调用失败:",t),c("ai","抱歉，我现在无法回答你的问题。请稍后再试。")}finally{i.value=!1}}},300),p=async()=>{if(!r.value.trim()||i.value)return;const s=r.value.trim();r.value="",M(s)},y=s=>{r.value=s,p()},C=async s=>{await new Promise(h=>setTimeout(h,1e3+Math.random()*2e3));const t=["这是一个很好的问题！让我来为你详细解答...","根据我的知识，这个问题涉及到几个方面...","我理解你的疑问。在动物学中，这个问题...","这是一个常见的动物相关问题，让我为你分析一下...","基于我的专业知识，我可以告诉你..."],o=Math.floor(Math.random()*t.length);return t[o]||"抱歉，我现在无法回答你的问题。"},x=s=>s.replace(/\n/g,"<br>"),L=s=>s.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),j=()=>{B(()=>{u.value&&(u.value.scrollTop=u.value.scrollHeight)})},b=()=>{d.value&&(d.value.style.height="auto",d.value.style.height=Math.min(d.value.scrollHeight,120)+"px")};return(s,t)=>(n(),a("div",K,[t[6]||(t[6]=e("div",{class:"page-header"},[e("h1",null,"AI 动物专家助手"),e("p",null,"智能回答你的动物相关问题")],-1)),e("div",{class:"chat-container",ref_key:"chatContainer",ref:u},[e("div",N,[(n(!0),a(m,null,g(v.value,o=>(n(),a("div",{key:o.id,class:S(["message",o.type])},[e("div",V,[o.type==="ai"?(n(),a("div",Q,[...t[1]||(t[1]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M12 2L2 7l10 5 10-5-10-5z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M2 17l10 5 10-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M2 12l10 5 10-5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):(n(),a("div",F,[...t[2]||(t[2]=[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]))]),e("div",R,[e("div",{class:"message-text",innerHTML:x(o.content)},null,8,U),e("div",$,_(L(o.timestamp)),1)])],2))),128)),i.value?(n(),a("div",G,[...t[3]||(t[3]=[q('<div class="message-avatar" data-v-43280d42><div class="ai-avatar" data-v-43280d42><svg width="24" height="24" viewBox="0 0 24 24" fill="none" data-v-43280d42><path d="M12 2L2 7l10 5 10-5-10-5z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-43280d42></path><path d="M2 17l10 5 10-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-43280d42></path><path d="M2 12l10 5 10-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-43280d42></path></svg></div></div><div class="message-content" data-v-43280d42><div class="typing-indicator" data-v-43280d42><span data-v-43280d42></span><span data-v-43280d42></span><span data-v-43280d42></span></div></div>',2)])])):k("",!0)])],512),e("div",J,[e("div",O,[z(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.value=o),onKeydown:D(P(p,["prevent"]),["enter"]),placeholder:"输入你的动物相关问题...",disabled:i.value,rows:"1",ref_key:"messageInput",ref:d,onInput:b},null,40,W),[[H,r.value]]),e("button",{onClick:p,disabled:!r.value.trim()||i.value,class:"send-button"},[...t[4]||(t[4]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M22 2L11 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M22 2l-7 20-4-9-9-4 20-7z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,X)]),v.value.length===0?(n(),a("div",Y,[t[5]||(t[5]=e("h3",null,"常见问题",-1)),e("div",Z,[(n(!0),a(m,null,g(f.value,o=>(n(),a("button",{key:o,onClick:h=>y(o),class:"question-chip"},_(o),9,ee))),128))])])):k("",!0)])]))}}),ie=E(te,[["__scopeId","data-v-43280d42"]]);export{ie as default};
