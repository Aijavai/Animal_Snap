import{k as L,r as O,c as u}from"./vue-vendor-DjNuForC.js";const k=L("animal",()=>{const t=O([]),d=u(()=>t.value.length),g=u(()=>t.value.sort((e,n)=>new Date(n.date).getTime()-new Date(e.date).getTime()).slice(0,5)),f=u(()=>t.value.sort((e,n)=>n.confidence-e.confidence)),v=e=>{const n={...e,id:Date.now().toString()};t.value.unshift(n),s()},h=e=>{const n=t.value.findIndex(a=>a.id===e);n>-1&&(t.value.splice(n,1),s())},p=e=>t.value.find(n=>n.id===e),w=()=>{t.value=[],s()},s=()=>{try{localStorage.setItem("animalsnap-animals",JSON.stringify(t.value))}catch(e){console.error("保存到本地存储失败:",e)}},l=()=>{try{const e=localStorage.getItem("animalsnap-animals");e&&(t.value=JSON.parse(e))}catch(e){console.error("从本地存储加载失败:",e)}},A=e=>{if(!e.trim())return t.value;const n=e.toLowerCase();return t.value.filter(a=>a.name.toLowerCase().includes(n)||a.description.toLowerCase().includes(n)||a.species.toLowerCase().includes(n)||a.habitat.toLowerCase().includes(n))},D=(e,n)=>{const a=new Date(e).getTime(),m=new Date(n).getTime();return t.value.filter(i=>{const c=new Date(i.date).getTime();return c>=a&&c<=m})},C=(e,n)=>t.value.filter(a=>a.confidence>=e&&a.confidence<=n),S=()=>({animals:t.value,exportDate:new Date().toISOString(),version:"1.0.0",totalCount:t.value.length}),y=e=>{try{return e.animals&&Array.isArray(e.animals)?(t.value=e.animals,s(),!0):!1}catch(n){return console.error("导入动物数据失败:",n),!1}},I=()=>{if(t.value.length===0)return{totalAnimals:0,favoriteCount:0,accuracy:0,thisWeek:0,total:0,averageConfidence:0,mostCommonAnimal:null,recentCount:0};const e=t.value.length,n=t.value.reduce((o,r)=>o+r.confidence,0)/e,a=t.value.reduce((o,r)=>(o[r.name]=(o[r.name]||0)+1,o),{}),m=Object.entries(a).sort(([,o],[,r])=>r-o)[0]?.[0]||null,i=new Date;i.setDate(i.getDate()-7);const c=t.value.filter(o=>new Date(o.date)>=i).length,x=Math.floor(e*.3);return{totalAnimals:e,favoriteCount:x,accuracy:Math.round(n*100),thisWeek:c,total:e,averageConfidence:Math.round(n*100)/100,mostCommonAnimal:m,recentCount:c}};if(l(),t.value.length===0){const e=[{id:"animal-1",name:"金毛犬",image:"https://images.unsplash.com/photo-1552053831-71594a27632d?w=400&h=300&fit=crop",confidence:.95,description:"金毛犬是一种大型犬，性格温顺，是很好的家庭宠物。",species:"犬科",habitat:"家庭",date:new Date().toISOString()},{id:"animal-2",name:"橘猫",image:"https://images.unsplash.com/photo-1574158622682-e40e69881006?w=400&h=300&fit=crop",confidence:.88,description:"橘猫是常见的家猫品种，性格活泼好动。",species:"猫科",habitat:"家庭",date:new Date(Date.now()-864e5).toISOString()},{id:"animal-3",name:"哈士奇",image:"https://images.unsplash.com/photo-1605568427561-40dd23c2acea?w=400&h=300&fit=crop",confidence:.92,description:"哈士奇是一种工作犬，精力充沛，需要大量运动。",species:"犬科",habitat:"家庭",date:new Date(Date.now()-1728e5).toISOString()}];t.value=e,s()}return{animals:t,animalCount:d,recentAnimals:g,animalsByConfidence:f,addAnimal:v,removeAnimal:h,getAnimalById:p,clearAllAnimals:w,searchAnimals:A,getAnimalsByDateRange:D,getAnimalsByConfidenceRange:C,exportAnimals:S,importAnimals:y,getAnimalStats:I,saveToLocalStorage:s,loadFromLocalStorage:l,loadAnimals:()=>{l()}}});export{k as u};
