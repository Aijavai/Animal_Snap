import{k as T,r as A,c as g,f as N,q as l,s as e,D as p,C as h,t as M,u as d,x as C,y as R,z as u}from"./vue-vendor-DjNuForC.js";import{u as z}from"./animal-CiS26lDf.js";import{u as D,_ as L}from"./index-B5beYMX8.js";import"./vant-vendor-D-yQvc_G.js";const V=T("notifications",()=>{const s=A([]),w=50,k=g(()=>s.value.filter(t=>!t.read).length),n=g(()=>s.value.sort((t,o)=>o.timestamp-t.timestamp).slice(0,10)),c=t=>{const o={...t,id:Date.now().toString()+Math.random().toString(36).substr(2,9),timestamp:Date.now(),read:!1};s.value.unshift(o),s.value.length>w&&(s.value=s.value.slice(0,w)),t.duration&&t.duration>0&&setTimeout(()=>{v(o.id)},t.duration),r()},v=t=>{const o=s.value.findIndex(a=>a.id===t);o>-1&&(s.value.splice(o,1),r())},m=t=>{const o=s.value.find(a=>a.id===t);o&&(o.read=!0,r())},x=()=>{s.value.forEach(t=>t.read=!0),r()},y=()=>{s.value=[],r()},S=()=>{s.value=s.value.filter(t=>!t.read),r()},B=(t,o,a=3e3)=>{c({type:"success",title:t,message:o,duration:a})},f=(t,o,a=5e3)=>{c({type:"error",title:t,message:o,duration:a})},j=(t,o,a=4e3)=>{c({type:"warning",title:t,message:o,duration:a})},b=(t,o,a=3e3)=>{c({type:"info",title:t,message:o,duration:a})},r=()=>{try{localStorage.setItem("animalsnap-notifications",JSON.stringify(s.value))}catch(t){console.error("保存通知数据失败:",t)}},i=()=>{try{const t=localStorage.getItem("animalsnap-notifications");t&&(s.value=JSON.parse(t))}catch(t){console.error("加载通知数据失败:",t)}};return i(),{notifications:s,unreadCount:k,recentNotifications:n,addNotification:c,removeNotification:v,markAsRead:m,markAllAsRead:x,clearAll:y,clearRead:S,success:B,error:f,warning:j,info:b,saveToLocalStorage:r,loadFromLocalStorage:i}}),I={class:"profile-page"},H={class:"user-header"},O={class:"user-info"},$={class:"user-stats"},_={class:"stat-item"},E={class:"stat-number"},P={class:"stat-item"},J={class:"stat-number"},U={class:"stat-item"},q={class:"stat-number"},F={class:"menu-section"},G={class:"menu-group"},K={class:"menu-items"},Q={class:"menu-content"},W={class:"menu-subtitle"},X={class:"menu-group"},Y={class:"menu-items"},Z={class:"menu-icon"},tt={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},et={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},ot={key:2,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},st={class:"menu-content"},nt={class:"menu-subtitle"},at={key:0,class:"theme-options"},it={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},rt={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},lt={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},dt={class:"menu-content"},ut={class:"menu-subtitle"},vt=N({__name:"ProfilePage",setup(s){const w=R(),k=z(),n=D(),c=V(),v=A(!1),m=g(()=>k.getAnimalStats()),x=g(()=>n.userStats),y=g(()=>({light:"浅色模式",dark:"深色模式",auto:"跟随系统"})[n.currentTheme]||"浅色模式"),S=()=>{w.push("/expert")},B=()=>{const i=k.exportAnimals(),t=JSON.stringify(i,null,2),o=new Blob([t],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(o),a.download=`animalsnap-backup-${new Date().toISOString().split("T")[0]}.json`,a.click()},f=i=>{n.updateSettings({theme:i}),v.value=!1},j=()=>{n.toggleNotifications()},b=()=>{alert(`AnimalSnap v1.0.0
一个智能动物识别应用
帮助您探索世界的神奇动物`)},r=()=>{if(confirm(`确定要清除所有缓存数据吗？此操作不可恢复！

将清除：
- 所有识别的动物数据
- 诊断历史记录
- 通知消息
- 用户设置（将恢复默认设置）`))try{k.clearAllAnimals(),c.clearAll(),localStorage.removeItem("diagnosisResults"),n.resetSettings(),["animalsnap-animals","animalsnap-notifications","animalsnap-user","diagnosisResults"].forEach(t=>{try{localStorage.removeItem(t)}catch(o){console.warn(`清除 ${t} 失败:`,o)}}),alert("所有缓存数据已清除！"),window.location.reload()}catch(i){console.error("清除数据时出错:",i),alert("清除数据时出错，请重试")}};return(i,t)=>(u(),l("div",I,[e("div",H,[t[9]||(t[9]=e("div",{class:"user-avatar"},[e("img",{src:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",alt:"用户头像"})],-1)),e("div",O,[t[7]||(t[7]=e("h2",null,"动物爱好者",-1)),t[8]||(t[8]=e("p",null,"探索世界的神奇动物",-1)),e("div",$,[e("div",_,[e("span",E,p(m.value.totalAnimals||0),1),t[4]||(t[4]=e("span",{class:"stat-label"},"已识别",-1))]),e("div",P,[e("span",J,p(x.value.collectionsCreated||0),1),t[5]||(t[5]=e("span",{class:"stat-label"},"收藏集",-1))]),e("div",U,[e("span",q,p(Math.round(m.value.accuracy||0))+"%",1),t[6]||(t[6]=e("span",{class:"stat-label"},"准确率",-1))])])])]),e("div",F,[e("div",G,[t[14]||(t[14]=e("h3",null,"我的数据",-1)),e("div",K,[e("div",{class:"menu-item",onClick:S},[t[11]||(t[11]=h('<div class="menu-icon" data-v-62a9d13f><svg width="24" height="24" viewBox="0 0 24 24" fill="none" data-v-62a9d13f><path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path><path d="M9 9h6v6H9z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path><path d="M3 9h6v6H3z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path><path d="M15 9h6v6h-6z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path><path d="M9 15h6v6H9z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path></svg></div>',1)),e("div",Q,[t[10]||(t[10]=e("span",{class:"menu-title"},"我的收藏",-1)),e("span",W,p(m.value.totalAnimals||0)+" 只动物",1)]),t[12]||(t[12]=e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M9 18l6-6-6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]),e("div",{class:"menu-item",onClick:B},[...t[13]||(t[13]=[h('<div class="menu-icon" data-v-62a9d13f><svg width="24" height="24" viewBox="0 0 24 24" fill="none" data-v-62a9d13f><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path><polyline points="7,10 12,15 17,10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></polyline><line x1="12" y1="15" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></line></svg></div><div class="menu-content" data-v-62a9d13f><span class="menu-title" data-v-62a9d13f>导出数据</span><span class="menu-subtitle" data-v-62a9d13f>备份我的动物收藏</span></div><svg width="20" height="20" viewBox="0 0 24 24" fill="none" data-v-62a9d13f><path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path></svg>',3)])])])]),e("div",X,[t[29]||(t[29]=e("h3",null,"设置",-1)),e("div",Y,[e("div",{class:"menu-item",onClick:t[0]||(t[0]=o=>v.value=!v.value)},[e("div",Z,[d(n).currentTheme==="light"?(u(),l("svg",tt,[...t[15]||(t[15]=[e("circle",{cx:"12",cy:"12",r:"5",stroke:"currentColor","stroke-width":"2"},null,-1),e("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42",stroke:"currentColor","stroke-width":"2"},null,-1)])])):d(n).currentTheme==="dark"?(u(),l("svg",et,[...t[16]||(t[16]=[e("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(u(),l("svg",ot,[...t[17]||(t[17]=[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2",stroke:"currentColor","stroke-width":"2"},null,-1),e("path",{d:"M3 9h18M9 21V9",stroke:"currentColor","stroke-width":"2"},null,-1)])]))]),e("div",st,[t[18]||(t[18]=e("span",{class:"menu-title"},"主题设置",-1)),e("span",nt,p(y.value),1)]),(u(),l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",class:C({"rotate-180":v.value})},[...t[19]||(t[19]=[e("path",{d:"M6 9l6 6 6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])],2))]),v.value?(u(),l("div",at,[e("div",{class:C(["theme-option",{active:d(n).currentTheme==="light"}]),onClick:t[1]||(t[1]=o=>f("light"))},[t[21]||(t[21]=h('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" data-v-62a9d13f><circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2" data-v-62a9d13f></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" data-v-62a9d13f></path></svg><div class="theme-option-content" data-v-62a9d13f><span class="theme-option-title" data-v-62a9d13f>浅色模式</span><span class="theme-option-desc" data-v-62a9d13f>适合白天使用</span></div>',2)),d(n).currentTheme==="light"?(u(),l("svg",it,[...t[20]||(t[20]=[e("path",{d:"M20 6L9 17l-5-5",stroke:"#10B981","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):M("",!0)],2),e("div",{class:C(["theme-option",{active:d(n).currentTheme==="dark"}]),onClick:t[2]||(t[2]=o=>f("dark"))},[t[23]||(t[23]=h('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" data-v-62a9d13f><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path></svg><div class="theme-option-content" data-v-62a9d13f><span class="theme-option-title" data-v-62a9d13f>深色模式</span><span class="theme-option-desc" data-v-62a9d13f>适合夜间使用</span></div>',2)),d(n).currentTheme==="dark"?(u(),l("svg",rt,[...t[22]||(t[22]=[e("path",{d:"M20 6L9 17l-5-5",stroke:"#10B981","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):M("",!0)],2),e("div",{class:C(["theme-option",{active:d(n).currentTheme==="auto"}]),onClick:t[3]||(t[3]=o=>f("auto"))},[t[25]||(t[25]=h('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" data-v-62a9d13f><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" data-v-62a9d13f></rect><path d="M3 9h18M9 21V9" stroke="currentColor" stroke-width="2" data-v-62a9d13f></path></svg><div class="theme-option-content" data-v-62a9d13f><span class="theme-option-title" data-v-62a9d13f>跟随系统</span><span class="theme-option-desc" data-v-62a9d13f>自动匹配系统设置</span></div>',2)),d(n).currentTheme==="auto"?(u(),l("svg",lt,[...t[24]||(t[24]=[e("path",{d:"M20 6L9 17l-5-5",stroke:"#10B981","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):M("",!0)],2)])):M("",!0),e("div",{class:"menu-item",onClick:j},[t[27]||(t[27]=e("div",{class:"menu-icon"},[e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M13.73 21a2 2 0 0 1-3.46 0",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),e("div",dt,[t[26]||(t[26]=e("span",{class:"menu-title"},"通知设置",-1)),e("span",ut,p(d(n).settings.notifications?"已开启":"已关闭"),1)]),t[28]||(t[28]=e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M9 18l6-6-6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))])])]),e("div",{class:"menu-group"},[t[32]||(t[32]=e("h3",null,"关于",-1)),e("div",{class:"menu-items"},[e("div",{class:"menu-item",onClick:b},[...t[30]||(t[30]=[h('<div class="menu-icon" data-v-62a9d13f><svg width="24" height="24" viewBox="0 0 24 24" fill="none" data-v-62a9d13f><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" data-v-62a9d13f></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path><path d="M12 17h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path></svg></div><div class="menu-content" data-v-62a9d13f><span class="menu-title" data-v-62a9d13f>关于应用</span><span class="menu-subtitle" data-v-62a9d13f>版本 1.0.0</span></div><svg width="20" height="20" viewBox="0 0 24 24" fill="none" data-v-62a9d13f><path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path></svg>',3)])]),e("div",{class:"menu-item",onClick:r},[...t[31]||(t[31]=[h('<div class="menu-icon" data-v-62a9d13f><svg width="24" height="24" viewBox="0 0 24 24" fill="none" data-v-62a9d13f><path d="M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path></svg></div><div class="menu-content" data-v-62a9d13f><span class="menu-title" data-v-62a9d13f>清除数据</span><span class="menu-subtitle" data-v-62a9d13f>删除所有本地数据</span></div><svg width="20" height="20" viewBox="0 0 24 24" fill="none" data-v-62a9d13f><path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-62a9d13f></path></svg>',3)])])])])])]))}}),mt=L(vt,[["__scopeId","data-v-62a9d13f"]]);export{mt as default};
