import{f as W,r as d,c as u,d as J,o as U,q as l,s as a,C as y,e as G,D as h,F as x,E as b,G as Q,y as $,z as r,H as V}from"./vue-vendor-DjNuForC.js";import{u as K}from"./animal-CiS26lDf.js";import{d as X,t as Y}from"./performance-DTgyZ5pq.js";import{S as Z,A as E}from"./AnimalCard-BJ4JH0fU.js";import{_ as q}from"./index-B5beYMX8.js";import"./vant-vendor-D-yQvc_G.js";const tt={class:"home-page"},et={class:"welcome-section"},at={class:"search-container"},st={class:"stats-dashboard"},ot={class:"stats-grid"},rt={class:"stat-card"},nt={class:"stat-content"},it={class:"stat-card"},lt={class:"stat-content"},ct={class:"stat-card"},dt={class:"stat-content"},vt={class:"stat-card"},ut={class:"stat-content"},ht={key:0,class:"search-results"},pt={class:"section-header"},ft={class:"result-count"},gt={key:0,class:"animals-grid"},mt={key:1,class:"empty-search"},kt={key:1,class:"recent-animals"},yt={class:"animals-grid"},wt=W({__name:"HomePage",setup(Ct){const v=$(),n=K(),o=d(""),c=d([]),p=d(!1),M=d(null),R=u(()=>{try{return o.value&&o.value.trim().length>0}catch{return!1}}),w=u(()=>{try{return!o.value||!o.value.trim()?[]:n.searchAnimals(o.value)||[]}catch(s){return console.error("æœç´¢å¤±è´¥:",s),[]}}),f=d(["é‡‘æ¯›çŠ¬","æ©˜çŒ«","å“ˆå£«å¥‡","é¸Ÿç±»","é±¼ç±»"]),i=d([]);u(()=>{try{if(!o.value||!o.value.trim())return[];const s=o.value.toLowerCase().trim();if(!s)return[];const t=new Set;try{n.animals&&Array.isArray(n.animals)&&n.animals.length>0&&n.animals.forEach(e=>{try{e&&e.name&&typeof e.name=="string"&&e.name.toLowerCase().includes(s)&&t.add(e.name),e&&e.species&&typeof e.species=="string"&&e.species.toLowerCase().includes(s)&&t.add(e.species),e&&e.habitat&&typeof e.habitat=="string"&&e.habitat.toLowerCase().includes(s)&&t.add(e.habitat)}catch{}})}catch(e){console.warn("å¤„ç†åŠ¨ç‰©æ•°æ®æ—¶å‡ºé”™:",e)}try{f.value&&Array.isArray(f.value)&&f.value.length>0&&f.value.forEach(e=>{try{e&&typeof e=="string"&&e.toLowerCase().includes(s)&&t.add(e)}catch{}})}catch(e){console.warn("å¤„ç†çƒ­é—¨æœç´¢æ—¶å‡ºé”™:",e)}return Array.from(t).slice(0,5)}catch(s){return console.error("ç”Ÿæˆæœç´¢å»ºè®®å¤±è´¥:",s),[]}});const g=u(()=>{try{return n.getAnimalStats()||{totalAnimals:0,favoriteCount:0,accuracy:0,thisWeek:0,total:0,averageConfidence:0,mostCommonAnimal:null,recentCount:0}}catch(s){return console.error("è·å–ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:",s),{totalAnimals:0,favoriteCount:0,accuracy:0,thisWeek:0,total:0,averageConfidence:0,mostCommonAnimal:null,recentCount:0}}}),z=u(()=>{try{return n.recentAnimals||[]}catch(s){return console.error("è·å–æœ€è¿‘åŠ¨ç‰©å¤±è´¥:",s),[]}}),H=X(s=>{s.trim()&&N(s)},300),_=Y(()=>{O()},1e3),C=s=>{try{s&&s.trim()&&(H(s),p.value=!1)}catch(t){console.error("æœç´¢å¤„ç†å¤±è´¥:",t)}},F=()=>{v.push("/search")},L=()=>{p.value=!1},N=s=>{if(!s.trim())return;const t=i.value.indexOf(s);t>-1&&i.value.splice(t,1),i.value.unshift(s),i.value.length>10&&(i.value=i.value.slice(0,10)),T()},T=()=>{try{localStorage.setItem("animalsnap-search-history",JSON.stringify(i.value))}catch(s){console.error("ä¿å­˜æœç´¢å†å²å¤±è´¥:",s)}},j=()=>{try{const s=localStorage.getItem("animalsnap-search-history");s&&(i.value=JSON.parse(s))}catch(s){console.error("åŠ è½½æœç´¢å†å²å¤±è´¥:",s)}},O=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«åŠŸèƒ½");return}try{const s=window.SpeechRecognition||window.webkitSpeechRecognition,t=new s;t.lang="zh-CN",t.continuous=!1,t.interimResults=!1,t.onstart=()=>{console.log("å¼€å§‹è¯­éŸ³è¯†åˆ«...")},t.onresult=e=>{const k=e.results[0][0].transcript;o.value=k,C(k)},t.onerror=e=>{console.error("è¯­éŸ³è¯†åˆ«é”™è¯¯:",e.error),alert("è¯­éŸ³è¯†åˆ«å¤±è´¥ï¼Œè¯·é‡è¯•")},t.onend=()=>{console.log("è¯­éŸ³è¯†åˆ«ç»“æŸ")},t.start()}catch(s){console.error("è¯­éŸ³è¯†åˆ«åˆå§‹åŒ–å¤±è´¥:",s),alert("è¯­éŸ³è¯†åˆ«åŠŸèƒ½ä¸å¯ç”¨")}},D=()=>{_()},S=(s,t)=>{const e=c.value.indexOf(s);t&&e===-1?c.value.push(s):!t&&e>-1&&c.value.splice(e,1)},m=()=>{v.push("/camera")},I=()=>{v.push("/diagnosis")},P=()=>{v.push("/expert")},A=s=>{v.push(`/animal-detail/${s}`)},B=s=>{!s.target.closest(".search-container")&&p.value&&(p.value=!1)};return J(()=>{try{n.loadAnimals(),c.value=["animal-1","animal-3"],j(),document.addEventListener("click",B)}catch(s){console.error("é¡µé¢åˆå§‹åŒ–å¤±è´¥:",s)}}),U(()=>{document.removeEventListener("click",B)}),(s,t)=>(r(),l("div",tt,[a("div",et,[t[1]||(t[1]=y('<div class="welcome-content" data-v-5a13a379><div class="greeting" data-v-5a13a379><h1 data-v-5a13a379>ä½ å¥½ï¼ŒåŠ¨ç‰©æ¢ç´¢è€…ï¼</h1><p data-v-5a13a379>å‘ç°å¹¶è®°å½•ä¸–ç•Œå„åœ°çš„ç¥å¥‡åŠ¨ç‰©</p></div><div class="weather-info" data-v-5a13a379><div class="weather-icon" data-v-5a13a379>ğŸŒ¤ï¸</div><div class="weather-text" data-v-5a13a379><span class="temperature" data-v-5a13a379>22Â°C</span><span class="location" data-v-5a13a379>åŒ—äº¬</span></div></div></div>',1)),a("div",at,[G(Z,{ref_key:"searchBarRef",ref:M,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),placeholder:"æœç´¢åŠ¨ç‰©ã€æ –æ¯åœ°...",onSearch:C,onVoiceSearch:D,onFocus:F,onClear:L,readonly:""},null,8,["modelValue"])])]),a("div",{class:"quick-actions"},[a("div",{class:"action-card primary",onClick:m},[...t[2]||(t[2]=[y('<div class="action-icon" data-v-5a13a379><svg width="28" height="28" viewBox="0 0 24 24" fill="none" data-v-5a13a379><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2" data-v-5a13a379></path><circle cx="12" cy="13" r="4" stroke="currentColor" stroke-width="2" data-v-5a13a379></circle></svg></div><div class="action-content" data-v-5a13a379><h3 data-v-5a13a379>æ‹ç…§è¯†åˆ«</h3><p data-v-5a13a379>AI æ™ºèƒ½è¯†åˆ«åŠ¨ç‰©ç§ç±»</p></div><div class="action-arrow" data-v-5a13a379>â†’</div>',3)])]),a("div",{class:"action-grid"},[a("div",{class:"action-card secondary",onClick:I},[...t[3]||(t[3]=[y('<div class="action-icon" data-v-5a13a379><svg width="24" height="24" viewBox="0 0 24 24" fill="none" data-v-5a13a379><path d="M9 12l2 2 4-4" stroke="#10B981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-5a13a379></path><path d="M21 12c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1z" stroke="#10B981" stroke-width="2" data-v-5a13a379></path><path d="M3 12c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1z" stroke="#10B981" stroke-width="2" data-v-5a13a379></path><path d="M12 21c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1z" stroke="#10B981" stroke-width="2" data-v-5a13a379></path><path d="M12 3c.552 0 1-.448 1-1s-.448-1-1-1-1 .448-1 1 .448 1 1 1z" stroke="#10B981" stroke-width="2" data-v-5a13a379></path></svg></div><div class="action-content" data-v-5a13a379><h4 data-v-5a13a379>è¯Šæ–­</h4><p data-v-5a13a379>å¥åº·è¯Šæ–­</p></div>',2)])]),a("div",{class:"action-card secondary",onClick:P},[...t[4]||(t[4]=[y('<div class="action-icon" data-v-5a13a379><svg width="24" height="24" viewBox="0 0 24 24" fill="none" data-v-5a13a379><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="#F59E0B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-5a13a379></path><circle cx="12" cy="7" r="4" stroke="#F59E0B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-5a13a379></circle><path d="M16 3.13a4 4 0 0 1 0 7.75" stroke="#F59E0B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-5a13a379></path><path d="M6 21v-2a4 4 0 0 1 4-4h.5" stroke="#F59E0B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-5a13a379></path></svg></div><div class="action-content" data-v-5a13a379><h4 data-v-5a13a379>ä¸“å®¶</h4><p data-v-5a13a379>å’¨è¯¢ä¸“å®¶</p></div>',2)])])])]),a("div",st,[t[13]||(t[13]=a("h2",null,"æˆ‘çš„æ•°æ®",-1)),a("div",ot,[a("div",rt,[t[6]||(t[6]=a("div",{class:"stat-icon"},"ğŸ“¸",-1)),a("div",nt,[a("h3",null,h(g.value.totalAnimals),1),t[5]||(t[5]=a("p",null,"å·²è¯†åˆ«åŠ¨ç‰©",-1))])]),a("div",it,[t[8]||(t[8]=a("div",{class:"stat-icon"},"â­",-1)),a("div",lt,[a("h3",null,h(g.value.favoriteCount),1),t[7]||(t[7]=a("p",null,"æ”¶è—æ•°é‡",-1))])]),a("div",ct,[t[10]||(t[10]=a("div",{class:"stat-icon"},"ğŸ¯",-1)),a("div",dt,[a("h3",null,h(g.value.accuracy)+"%",1),t[9]||(t[9]=a("p",null,"è¯†åˆ«å‡†ç¡®ç‡",-1))])]),a("div",vt,[t[12]||(t[12]=a("div",{class:"stat-icon"},"ğŸ“…",-1)),a("div",ut,[a("h3",null,h(g.value.thisWeek),1),t[11]||(t[11]=a("p",null,"æœ¬å‘¨è¯†åˆ«",-1))])])])]),R.value&&o.value.trim()?(r(),l("div",ht,[a("div",pt,[t[14]||(t[14]=a("h2",null,"æœç´¢ç»“æœ",-1)),a("span",ft,h(w.value.length)+" ä¸ªç»“æœ",1)]),w.value.length>0?(r(),l("div",gt,[(r(!0),l(x,null,b(w.value,e=>(r(),V(E,{key:e.id,id:e.id,name:e.name,"image-url":e.image,species:e.species,confidence:e.confidence,date:e.date,"is-favorite":c.value.includes(e.id),size:"small",onClick:A,onFavorite:S},null,8,["id","name","image-url","species","confidence","date","is-favorite"]))),128))])):(r(),l("div",mt,[t[15]||(t[15]=a("div",{class:"empty-icon"},"ğŸ”",-1)),t[16]||(t[16]=a("h3",null,"æœªæ‰¾åˆ°ç›¸å…³åŠ¨ç‰©",-1)),t[17]||(t[17]=a("p",null,"è¯•è¯•å…¶ä»–å…³é”®è¯æˆ–ä½¿ç”¨æ‹ç…§è¯†åˆ«åŠŸèƒ½",-1)),a("button",{class:"btn-primary",onClick:m},"å¼€å§‹æ‹ç…§è¯†åˆ«")]))])):(r(),l("div",kt,[a("div",{class:"section-header"},[t[18]||(t[18]=a("h2",null,"æœ€è¿‘è¯†åˆ«",-1)),a("button",{class:"view-all-btn",onClick:m},"æŸ¥çœ‹å…¨éƒ¨")]),a("div",yt,[(r(!0),l(x,null,b(z.value,e=>(r(),V(E,{key:e.id,id:e.id,name:e.name,"image-url":e.image,species:e.species,confidence:e.confidence,date:e.date,"is-favorite":c.value.includes(e.id),size:"small",onClick:A,onFavorite:S},null,8,["id","name","image-url","species","confidence","date","is-favorite"]))),128))])])),a("div",{class:"bottom-tip"},[a("div",{class:"tip-content"},[t[20]||(t[20]=a("h3",null,"å¼€å§‹ä½ çš„åŠ¨ç‰©æ¢ç´¢ä¹‹æ—…",-1)),t[21]||(t[21]=a("p",null,"æ‹ç…§è¯†åˆ«åŠ¨ç‰©ï¼Œå»ºç«‹ä½ çš„ä¸“å±æ”¶è—",-1)),a("button",{class:"btn-primary",onClick:m},[...t[19]||(t[19]=[a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[a("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z",stroke:"currentColor","stroke-width":"2"}),a("circle",{cx:"12",cy:"13",r:"4",stroke:"currentColor","stroke-width":"2"})],-1),Q(" å¼€å§‹è¯†åˆ« ",-1)])])])])]))}}),Et=q(wt,[["__scopeId","data-v-5a13a379"]]);export{Et as default};
